<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Fehlerzeiten korrigieren</title>
</head>
<body>
    <h1>Fehlerzeiten korrigieren</h1>
    <p>Hier können nur automatisch gesetzte Einträge angepasst werden:
       <b>Auto-Login {{ start_h }} Uhr</b> (Typ: in) und
       <b>Auto-Logout {{ end_h }} Uhr</b> (Typ: out).
       Freie Änderungen sind absichtlich nicht erlaubt.</p>

    {% if candidates %}
        {% for uid, data in candidates.items() %}
            <h2>{{ data.name }} (ID {{ uid }})</h2>
            <table border="1" cellpadding="6" cellspacing="0">
                <tr><th>Datum</th><th>Typ</th><th>Neue Uhrzeit</th><th>Aktion</th></tr>
                {% for e in data.entries %}
                <tr>
                    <form method="POST" action="/admin/fix_errors/apply">
                        <td>{{ e.date }}<input type="hidden" name="date" value="{{ e.date }}"></td>
                        <td>{{ e.type }}<input type="hidden" name="type" value="{{ e.type }}"></td>
                        <td>
                            <input name="new_time" placeholder="HH:MM" pattern="\\d{2}:\\d{2}" required>
                            <input type="hidden" name="user_id" value="{{ uid }}">
                        </td>
                        <td><button type="submit">Speichern</button></td>
                    </form>
                </tr>
                {% endfor %}
            </table>
        {% endfor %}
    {% else %}
        <p>Aktuell keine automatisch gesetzten Einträge gefunden.</p>
    {% endif %}

    <p><a href="/admin_panel">Zurück zum Adminbereich</a></p>
</body>
</html>
